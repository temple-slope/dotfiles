---
name: commit-push
description: 変更をコンテンツ種別でグループ化してコミットし、セキュリティレビュー後にプッシュする。
---

# コミット＆プッシュ

## 手順

### 1. コンテキスト収集

以下のBashコマンドで現状を把握する:

```bash
# 現在のブランチ
git branch --show-current

# 未追跡ファイル
git status --porcelain | grep "^??" | cut -c4-

# 変更ファイル
git status --porcelain | grep "^.M\|^ M\|^M" | cut -c4-

# 削除ファイル
git status --porcelain | grep "^.D\|^ D\|^D" | cut -c4-

# 全差分（staged・unstaged）
git diff HEAD

# 過去のコミット（スタイル参考）
git log --oneline -5
```

### 2. セキュリティレビュー

コミット前に以下を必ずチェックする:

- ハードコードされたシークレット（APIキー・トークン・パスワード）
- 秘密鍵・証明書
- 機密パス・認証情報
- 1Password参照の露出
- 公開すべきでない個人情報

**問題が見つかった場合は即座に停止して報告。コミットを進めない。**

### 3. コミット作成

関連する変更を論理的なグループに分けてコミットする:

グループ分けの基準:
- 機能・用途（例: "tmux設定", "zsh設定"）
- ファイル種別（例: "Brewfile", "Claude設定"）
- 目的（例: "クリーンアップ", "リネーム", "機能追加"）

各グループについて:
1. 関連ファイルのみをステージング
2. コンベンショナルコミットスタイルでメッセージ作成:
   - サマリー行は50文字以内
   - 必要に応じてbodyに「何を」「なぜ」を記載
3. 必ず以下を含める: `Co-Authored-By: Claude Sonnet 4.6 <noreply@anthropic.com>`

### 4. リモートへプッシュ

全コミット作成後:
- ブランチがリモートより先行していることを確認
- originにプッシュ

## 進捗管理

TodoWriteツールで各コミットの進捗を追跡する。

## アウトプット形式

各ステップを報告:
1. セキュリティレビュー結果（合格/不合格と詳細）
2. 作成予定のコミット一覧（対象ファイル含む）
3. 各コミットの作成結果
4. 最終プッシュ結果
